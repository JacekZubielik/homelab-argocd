---
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
namespace: traefik  

resources:
- ../../base
#- certificate-dashboard-staging.yaml
- chains.yaml
#- ingressroute-dashboard.yaml
- middlewares.yaml
- secrets.yaml
- servicemonitor.yaml
- tlsoption.yaml

commonLabels:
  app.kubernetes.io/name: traefik
  app: traefik

# configMapGenerator:
# - name: traefik-config
#   literals:
#   - TZ="Europe/Warsaw"

patches:
  - target:
      group: rbac.authorization.k8s.io
      version: v1
      kind: ClusterRoleBinding
      name: traefik-role-binding
    patch: |-
      - op: add
        path: /subjects/0/namespace
        value: traefik