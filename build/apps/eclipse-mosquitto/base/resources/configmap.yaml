apiVersion: v1
kind: ConfigMap
metadata:
  name: eclipse-mosquitto-config
  namespace: iot
  # annotations:
    #argocd.argoproj.io/sync-options: SkipDryRunOnMissingResource=true
    # argocd.argoproj.io/sync-wave: "4"
  labels:
    app.kubernetes.io/name: eclipse-mosquitto
data:
  password_file: |
    mqtt:$RE8zMkpUbGZiNDQ2SktFeEViRVZnQ1o0RTc0Q3Jx

  mosquitto.conf: |
    allow_anonymous true
    persistence true
    persistence_location /mosquitto/data/
    persistence_file mosquitto.db
    protocol mqtt
    listener 1883
    listener 8883
    log_dest file /mosquitto/log/mosquitto.log
    log_dest stdout
    password_file /mosquitto/config/password_file
    pid_file /mosquitto/mosquitto.pid
    cafile /mosquitto/config/certs/ca.crt
    certfile /mosquitto/config/certs/server.crt
    keyfile /mosquitto/config/certs/server.key
    require_certificate false
    socket_domain ipv4

  ca.crt: |-
    -----BEGIN CERTIFICATE-----
    MIIDvzCCAqegAwIBAgIUMukJRdbqWXmnYHUN4Wz+wQWErrcwDQYJKoZIhvcNAQEL
    BQAwbzELMAkGA1UEBhMCVFIxETAPBgNVBAgMCElzdGFuYnVsMREwDwYDVQQHDAhJ
    c3RhbmJ1bDEUMBIGA1UECgwLYW5vdGhlcmxpZmUxCzAJBgNVBAsMAkNBMRcwFQYD
    VQQDDA5hbm90aGVybGlmZS5wbDAeFw0yMzExMTgxMTQ2MjdaFw0yNDExMTcxMTQ2
    MjdaMG8xCzAJBgNVBAYTAlRSMREwDwYDVQQIDAhJc3RhbmJ1bDERMA8GA1UEBwwI
    SXN0YW5idWwxFDASBgNVBAoMC2Fub3RoZXJsaWZlMQswCQYDVQQLDAJDQTEXMBUG
    A1UEAwwOYW5vdGhlcmxpZmUucGwwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEK
    AoIBAQDNCxaFT+FLwMKABUi3DjswGDVK+Vtms5JuiCt9GsZ64SlLB01Yb2/Fu5oF
    VZyb+nvf0V+o83DkA27/fyVaqDh8KRFv0lz3ay6uIVq641bZ/MmBFnKZ5afcEzCN
    U+lnI5HlJOjjRR7mjtKZyQaRiqXvyIfH4o/a4WnE7RKwtJNsS50cR2Wd0Sgkm40M
    bpLZxRH2QanL/p5vkiNuQnkQXdeKejDIFFX8q9qvBByD09zNQ3jVhDcpCKeBQZVW
    1QOSDDBchCl6WqPiAsSYBw9BD2wx6GO+3bn6zL+uPMTWlHrmqEvbfRE7ocIA9Egt
    iluZ9w8CA7kLLLcRDtLQSiSmkrnHAgMBAAGjUzBRMB0GA1UdDgQWBBR+7GaJkb6A
    DteaZqq3DczTSnTfGTAfBgNVHSMEGDAWgBR+7GaJkb6ADteaZqq3DczTSnTfGTAP
    BgNVHRMBAf8EBTADAQH/MA0GCSqGSIb3DQEBCwUAA4IBAQB75fLy+TOt3rqtfoJY
    GTxjHfUsMSdgOO3mm2NK7T9TGBNdbVMODVGxH40uQwrGJQegsCNcRV6Xd7RYzxrB
    zPevfOM61t90ptbNHsfZ7ts+dXWt0CzdZ71XFuLucHtpYiuF3cgoilkmVEXYVc1w
    VUS3k+EVv9imvQsN+ygk2DU8B2ZUs0yRdtigUmRa3so8xal0BUJia4hNaeTmTj1b
    L4UHYonPBoedj1l4wWDmx+WTQScGKhQDHkH8Vnho1m1ICvJZJ9fHvV3IG4MezP5G
    RfdEW1tpK7KQ8D2Ubk2+vQ1b1f1WAqfHmZdE7w0+93jmkdTz8E+Wu1Iyr657SoXU
    kbqJ
    -----END CERTIFICATE-----
  server.crt: |-
    -----BEGIN CERTIFICATE-----
    MIIDaTCCAlECFCc+6AFyCk/FzNN9dBT0Rqwj2iGJMA0GCSqGSIb3DQEBCwUAMG8x
    CzAJBgNVBAYTAlRSMREwDwYDVQQIDAhJc3RhbmJ1bDERMA8GA1UEBwwISXN0YW5i
    dWwxFDASBgNVBAoMC2Fub3RoZXJsaWZlMQswCQYDVQQLDAJDQTEXMBUGA1UEAwwO
    YW5vdGhlcmxpZmUucGwwHhcNMjMxMTE4MTE0NjI3WhcNMjQxMTE3MTE0NjI3WjBz
    MQswCQYDVQQGEwJUUjERMA8GA1UECAwISXN0YW5idWwxETAPBgNVBAcMCElzdGFu
    YnVsMRQwEgYDVQQKDAthbm90aGVybGlmZTEPMA0GA1UECwwGU2VydmVyMRcwFQYD
    VQQDDA5hbm90aGVybGlmZS5wbDCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoC
    ggEBALgpxlrcZBrNlCG30b+LZOm4Ei89vrddhvVkUm6TYmAUzrU9U6eJykCUQSXA
    i0GcedifnYbFmMdLRzC6FR0bYSVLhoATpxVjPFaWbAuJRMbkQonW9L5yZW3qAdLx
    ZXtUzKssG0V2l1sj5FdhulcsWZKv3ZUDvAMawVMwZuA078SuIG/gR/vfhjsjLwne
    Xq20VueyCXiQhDGxXz73ZCYjDl4EvtdIc/RpNRvQpE1FRQfrFScgbhkY/YqD95xW
    uGZXFj9pMj1ManXd06fTGgh6WmPB0wgkbhn6i58i375MUpy/1UQkRp3Ytftb3ZCY
    DKHNL+F+90od5K0APATFGchQhhUCAwEAATANBgkqhkiG9w0BAQsFAAOCAQEAfZXA
    LN/2c2h0Bi2fkQkVmQh2VRxWPBcCZjuMs8vJiFN7Q1kfxA0HBrAO9GILH0O20tbm
    2mmAP5Q3AFIlXXmJjG86uMoclNyM7MGskzovfuze4ZiL6RJaC8zVlstMvtWbtcOV
    Efhl5fWmduiAQFRjSV5cavm/43I6Ny3NUz2mU8OZoz/ZB2xRNvIByYERJ0LIJ87J
    ROMH4vPLHSf5ww+97I6xIX+N/2sjFhCXrI9GMZ1ZfPqdsMrPYSx8E0lfTaZj+2R7
    k5qkxDmZXV9VBDA09S46/yZ99Dqu4ivnxfD3wMmsH8TcazJfZ1nFbATqBnsKmQrc
    oP2HE6K5ZF2CtWloVA==
    -----END CERTIFICATE-----
  server.key: |-
    -----BEGIN PRIVATE KEY-----
    MIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQC4KcZa3GQazZQh
    t9G/i2TpuBIvPb63XYb1ZFJuk2JgFM61PVOnicpAlEElwItBnHnYn52GxZjHS0cw
    uhUdG2ElS4aAE6cVYzxWlmwLiUTG5EKJ1vS+cmVt6gHS8WV7VMyrLBtFdpdbI+RX
    YbpXLFmSr92VA7wDGsFTMGbgNO/EriBv4Ef734Y7Iy8J3l6ttFbnsgl4kIQxsV8+
    92QmIw5eBL7XSHP0aTUb0KRNRUUH6xUnIG4ZGP2Kg/ecVrhmVxY/aTI9TGp13dOn
    0xoIelpjwdMIJG4Z+oufIt++TFKcv9VEJEad2LX7W92QmAyhzS/hfvdKHeStADwE
    xRnIUIYVAgMBAAECggEAAc164RHOMwr3G7tiZLcXFkiUePzoPIBAXW+NdQKhUGJz
    wYdnpbiuD6LD3nw7gLlo4etyDcsqWy0L9dikc0P81/Icz20h0g5GHWzcguJll3LN
    ie7eN20EPCaxvOBbB3GFjVlhrPTjt2MrDYXp3oeTGuH4z8gZE4i0Ar3zC9fIzwqH
    BYRSVwf3CjsSSgNxT+3QIQwa/BEeuazJeXPQ4JXBrsnvXiZ4TgzgWTG66gLY0u9c
    F9nMYMzkDqXcsFBjrmdq9zOt1H5/e1Gi9nIocufVAyHNH3052R0dIbTdqPd9xFd3
    X2pv1Q6jDSUb8BesdzGm37XBRETwN9HlE4IBpRk8cwKBgQDxPps8qF46GraJno63
    AXOaYsWkQhFl5AXOEjMdWZeYQhXdZjUwDF+Z1YUA/32Vp714FAs70z2mHlGKpctW
    +jAs0ynmHkCIFL8kXfTa84K9qgAlX00HU+Nl/a9uE+ln6PM8UvsDicKtWKo2It06
    DdhhVRxKRf3H4YYd9pe9StgPcwKBgQDDbWQ6eX55vc+bNYtifIPBkDQDxbgRamXe
    5Z4IyLNCz6ot1Bup2/5GC80XVdtOF0aLO25+2pnAj4vhnoT/VcPL2CLzdbZLaA5p
    BS5NBhb4uW6SNSxEhKi1KofZfTtQ7fg1nzq4zhABI+1H+MJhsgnuIS9nxMq3unjD
    G4NMfFIiVwKBgQDJAc869Va9tzBM7o4fMdhu1Mm1GU+BxEKJ92QbmmDTfozVUqoS
    hNzLQrt1n2u2XHNkL99EU7hUR4LNsWMB76hgUPniQWanfBHfbWHtZWSUP6erfAKk
    jmM0wfGAGJsr909j/ggkZI6O/Qel39rQ2mRmhRHzWOoht2mWYbcBA/GOvQKBgBQt
    AQIAdQxAimRtvLwoOroLFzOkgAJcR7QhZJVnkwo8wkcE9O4uZiv5H+1e0ctYH9JU
    Cm5SRzlYGIrsgLKTuikbYVBdQLq8PXCeNk+BZ3G6Qy4ZCz7vqzM49tl/UlZimxN+
    IuPdck2L1f1uMzM+3EOXbXt7F6qsN7d86atF0nz1AoGAUNFt5v6Crv2cHswzhQjO
    YMqFfqPd8G8jdCXEfNAnP0CaVStFAqUpopJdx5J9bjTeXSs9O0eN2iYk2RAlxF1H
    zmCA4L8AjTqUJ6y6DSGnCJNbjZJD5Xgwe2DqHzakBzg6Dcp9W4lE5ivi84Sz2R+8
    TjDD5Y41S6vr2tcLjd2reeU=
    -----END PRIVATE KEY-----