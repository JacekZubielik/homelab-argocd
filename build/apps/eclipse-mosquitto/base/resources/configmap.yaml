apiVersion: v1
kind: ConfigMap
metadata:
  name: eclipse-mosquitto-config
  namespace: iot
  # annotations:
    #argocd.argoproj.io/sync-options: SkipDryRunOnMissingResource=true
    # argocd.argoproj.io/sync-wave: "4"
  labels:
    app.kubernetes.io/name: eclipse-mosquitto
data:
  mosquitto.conf: |
    allow_anonymous false
    persistence true
    persistence_location /mosquitto/data/
    persistence_file mosquitto.db
    protocol mqtt
    listener 1883
    listener 8883
    log_dest file /mosquitto/log/mosquitto.log
    log_dest stdout
    pid_file /mosquitto/mosquitto.pid
    cafile /mosquitto/config/certs/ca.crt
    certfile /mosquitto/config/certs/server.crt
    keyfile /mosquitto/config/certs/server.key
    require_certificate true
    socket_domain ipv4
  ca.crt: |-
    -----BEGIN CERTIFICATE-----
    MIIDtzCCAp+gAwIBAgIUQJOIyYgLcJCXTCTB0vNYWFZ0nn0wDQYJKoZIhvcNAQEL
    BQAwazELMAkGA1UEBhMCUEwxDzANBgNVBAgMBkdkYW5zazEPMA0GA1UEBwwGR2Rh
    bnNrMRQwEgYDVQQKDAthbm90aGVybGlmZTELMAkGA1UECwwCQ0ExFzAVBgNVBAMM
    DjE5Mi4xNjguNDAuMTgzMB4XDTI0MDIyNjIyMzE1N1oXDTI1MDIyNTIyMzE1N1ow
    azELMAkGA1UEBhMCUEwxDzANBgNVBAgMBkdkYW5zazEPMA0GA1UEBwwGR2RhbnNr
    MRQwEgYDVQQKDAthbm90aGVybGlmZTELMAkGA1UECwwCQ0ExFzAVBgNVBAMMDjE5
    Mi4xNjguNDAuMTgzMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAyN5o
    DldO7Wd/T5d+0tX8pu7Wbdf+OeyoyeVgWq8C5j2+1tVF4pSJGDox4DRO++wwqs7N
    zPw1lHXoSoLEt9W60ySP0zDHxybV8HgI5mOwJz9blpVQljDOz35xuV1lJI8TqoS4
    3HWEgMUm/4tSVQrxMJbnhJVHmDe7Z7IAwHXw8atqKUwpwnSPeanCJyUE4VTxbcci
    rQI+0ULURDn1XO+RHB0qNoza8tGpbKthsbTcHORtsRCo6CrtPnVUNnf/P+ZP21Zd
    rCcNo8LV2yP0HzG5CLGHSsx/8gaTpxY/l8iEAUBU+EHUgWCD80TbA2A9YvK471kB
    Yond+hIFnvEx1OQIqwIDAQABo1MwUTAdBgNVHQ4EFgQU5g9D3k2ZjkcM3almy2Fr
    ejjwfcEwHwYDVR0jBBgwFoAU5g9D3k2ZjkcM3almy2FrejjwfcEwDwYDVR0TAQH/
    BAUwAwEB/zANBgkqhkiG9w0BAQsFAAOCAQEAxM2C5PnT1wmWTMVlkEgcLhBq1bXj
    WJ0Y3gYep8YjmrevJB/WuNyAKeckPW3o+5KSYnL8K2CEimuCOEDYAzEe6zNM4MIG
    B+crkOCWkVKrmg9NBZJZXUpOCBMFsD532a/msyC6khVOEHrASWQFvWzddpj2vHnn
    HZJ1xfgxorr9P2l4bld2UrDTd1rsDEhcZbk2LMaggDw6oIjEk5uqJRE6NSUUv1Gw
    h5P/uG4bxGqJ3iinNehNrMAsqut87WgPtoCSKQqBVrpI3kmpw5/lpfC9mGO7uLxF
    uecJVe/DzjIV1lsVzpzRtKN03+/JjHOldh9O9NIijaaZpL6k96M6jcKeHg==
    -----END CERTIFICATE-----
  server.crt: |-
    -----BEGIN CERTIFICATE-----
    MIIDYTCCAkkCFBpA5yHqzK1kKOVMM/bnl0Er72SUMA0GCSqGSIb3DQEBCwUAMGsx
    CzAJBgNVBAYTAlBMMQ8wDQYDVQQIDAZHZGFuc2sxDzANBgNVBAcMBkdkYW5zazEU
    MBIGA1UECgwLYW5vdGhlcmxpZmUxCzAJBgNVBAsMAkNBMRcwFQYDVQQDDA4xOTIu
    MTY4LjQwLjE4MzAeFw0yNDAyMjYyMjMxNTdaFw0yNTAyMjUyMjMxNTdaMG8xCzAJ
    BgNVBAYTAlBMMQ8wDQYDVQQIDAZHZGFuc2sxDzANBgNVBAcMBkdkYW5zazEUMBIG
    A1UECgwLYW5vdGhlcmxpZmUxDzANBgNVBAsMBlNlcnZlcjEXMBUGA1UEAwwOMTky
    LjE2OC40MC4xODMwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQC029vY
    t8kyhSCv0jrhhv0JhewyC3CHYGmSkJyjDjfAcjSg7YIy2hNe0dSAohBMJso5PNhk
    2xC5nIOVRKUVsUU4PedSH9yJ9+1og6N7yDkqFEMMyEr0V9uHrY0sORSVN5+EewLU
    hcHL96kcvwVjqsDwvFpBQA1WnriP01zaby9Rw6HFLnOIVCWjkT5OtFdWn11t17hG
    0d+4KL8mkulg6vA2tk4yjXJE0OjPl80VD+NBjoZnLteuogtovvI5Mn9t2VR6Nylm
    Cd0BzHmSfV/KC7RqiYqcRSGoeDb4bQQKWc/gYWTL3Udv8KQ4CB1s5X+luJQ61m0t
    6Dte+AMydrQ2vRiJAgMBAAEwDQYJKoZIhvcNAQELBQADggEBAJC3sD9GHIP55yoR
    xLG9dNRBtgvlUhEmxQl0c2a9XNwyks7ALAnzyF1gIe157mui7Ss3AkZ0QwWTNw17
    NeeqG59mxrd692eiOJP2I7VSK6YV1rN1NNm95iWztQHS5U31wwXC4vB5b+nqGdsH
    z+NVgHq1OU5eUAr/dgDnWVgKzJjPZXoPFY0mFnqjG6C0Ge7emBM2xT36PskxV3Kx
    hTetlddjuYNFGLaqHmjhTdXSFD+K3TAtmyeTjZGEBOFjkd3BOszmQCliGSiQjf6o
    lQfysc1est1B+J1bevFrMvAXpmcgKpPQzDtLYy2lsxArAeRsgCXSt906Ta89/3zg
    2xZfBgE=
    -----END CERTIFICATE-----
  server.key: |-
    -----BEGIN PRIVATE KEY-----
    MIIEvwIBADANBgkqhkiG9w0BAQEFAASCBKkwggSlAgEAAoIBAQC029vYt8kyhSCv
    0jrhhv0JhewyC3CHYGmSkJyjDjfAcjSg7YIy2hNe0dSAohBMJso5PNhk2xC5nIOV
    RKUVsUU4PedSH9yJ9+1og6N7yDkqFEMMyEr0V9uHrY0sORSVN5+EewLUhcHL96kc
    vwVjqsDwvFpBQA1WnriP01zaby9Rw6HFLnOIVCWjkT5OtFdWn11t17hG0d+4KL8m
    kulg6vA2tk4yjXJE0OjPl80VD+NBjoZnLteuogtovvI5Mn9t2VR6NylmCd0BzHmS
    fV/KC7RqiYqcRSGoeDb4bQQKWc/gYWTL3Udv8KQ4CB1s5X+luJQ61m0t6Dte+AMy
    drQ2vRiJAgMBAAECggEADPMbFDLgnJXsp7opTiGgt5BXv6OTDJZqKLzjAkfP1R84
    RneLFYII1ga3LPitqw4x95Q0OFB5K5kZ0NPH8DwvpR3FlNtEKrrOTGf0ijXlZe5q
    eJ1UxJcP2HCkRZDWuPJxIQa/xqDHJggXG0BQLfk5dGNAISDpc5TMyTuMj/VbEYMO
    Dp8r4Q68JU8OzsgKvGwAqVSo2cLsqHdUl3FI639m1b5qXX+FzMKo4ioHZXdGFGV3
    i2ID/10PQzU+AEJ3LGF7hJm9r9a9Mae6WpsDNCj1DH5GH7KOtpQVqwFfEsJ+JCGy
    +g8V/rpmK4uFtdvjKUeU7wxaUL/I18CWs8Yb/HrCqQKBgQDlq5GCXcKuByX0KjOg
    4+f9K++TIJo7zP65Zbnh3WecccLC4lNpW9tyFhGksbjG+CIfh+chVvQHCIyUnJxv
    AKc912EB8wQNr6k/lbWV3lfZauedjKR3Ys4aehR4u7lptk7SBKOO3p3hren8l3q6
    pHBePmbuwOpkd7XrFVIV+29dZQKBgQDJl8Jk5Hxl2dZLDTBMJj6IJXdQsEgJ3GFd
    knuOfrjM5q4W7LlnoSqesin0znM0MzCO3opUpA3IId4DE8p+zMuHwGsn4aMlJFDH
    kS19bMxr0WEiqbxpSh8sVj7mImD09KT+UdHDYTYfwAH2wDeRhettoA7bWti1rWEA
    jbNY8RheVQKBgQCD0cBXcdceKW4oQNyXGJf7YG9GI61Ca3s8D93rfDdOvKCLWHmF
    fDpstav0uiiS0rJLJKaNJSo0qzx8w5Kpx1c2EFtWUhPegxcCLrwlQ5Nqb4h2jdWL
    zEL9QVpknWJjAUcmFZGGm9FESZyF5K+FVoJEJU7Q9BrUBT19qyQNB944XQKBgQDJ
    EeQjq73j/LV/4CS3H0Ipm2z5fworQ7OdmBhC1WRPgxpK5Uw774VKChxM/4nqm9Ao
    ABFrQMI6RoVg/mFvvaaXvTVj7utBhYpIsyXzPwxZ0doXr8KsJfEX0OIluk6IpGbY
    /xTA0nogiuuqiKgkLrXWftmyslcKRmdFHRCwerC6jQKBgQCpnrGB5gjJZormQh9W
    vz25A2v/TirIRhuc7REKVZdi2yTw2GKkmvIXiOvgwTdtUNUPO1JJp4jcLkcGvi5x
    CgerZQ/f+czUqLtLN5ggr3gC9KlCiRZ/EKCJhIMDkPOifdwEnnN759vATHJg9VFH
    OAUdlxpZqbqX6Xp2CrXrF8ii8w==
    -----END PRIVATE KEY-----